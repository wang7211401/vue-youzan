{"version":3,"sources":["webpack:///static/js/cart.d53eb1f05d805b830661.js","webpack:///./src/modules/js/api.js?4c58***","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js?c08e","webpack:///./src/modules/js/cartService.js"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topList","subList","rank","searchList","details","deal","cartAdd","cartRemove","cartMremove","cartReduce","cartLists","cartUpdate","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","108","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__cart_css__","__WEBPACK_IMPORTED_MODULE_1__cart_base_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_trade_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_4_axios__","__WEBPACK_IMPORTED_MODULE_4_axios___default","__WEBPACK_IMPORTED_MODULE_5_js_api_js__","__WEBPACK_IMPORTED_MODULE_6_velocity_animate__","__WEBPACK_IMPORTED_MODULE_6_velocity_animate___default","__WEBPACK_IMPORTED_MODULE_8_js_fetch_js__","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","forEach","goodsList","good","selectLists","arr","list","push","price","number","allRemoveSelected","removeChecked","removeLists","created","getLists","methods","_this","a","post","then","res","cartList","editing","editingMsg","selectGood","attr","selectShop","selectAll","edit","shopIndex","item","index","start","e","startX","changedTouches","clientX","end","goodIndex","endX","left","$refs","reduce","id","add","remove","removeList","removeConfirm","_this2","_removeData","i","splice","console","log","removeShop","ids","findIndex","filters","toFixed","16","fetch","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","__WEBPACK_IMPORTED_MODULE_1_axios___default","status","catch","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_axios__","72","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__","__WEBPACK_IMPORTED_MODULE_3_js_api_js__","Cart","75","exports","76","77"],"mappings":"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","file":"static/js/cart.d53eb1f05d805b830661.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar url = {\n    hotLists: '/index/hotLists',\n    banner: '/index/banner',\n    topList: '/category/topList',\n    subList: '/category/subList',\n    rank: '/category/rank',\n    searchList: '/search/list',\n    details: '/goods/details',\n    deal: '/goods/deal',\n    cartAdd: '/cart/add',\n    cartRemove: '/cart/remove',\n    cartMremove: '/cart/mremove',\n    cartReduce: '/cart/reduce',\n    cartLists: '/cart/list',\n    cartUpdate: 'cart/update',\n    addressLists: '/address/list',\n    addressAdd: '/address/add',\n    addressRemove: '/address/remove',\n    addressUpdate: '/address/update',\n    addressSetDefault: '/address/setDefault'\n};\n\nvar host = 'http://rapapi.org/mockjsdata/24170';\n\nfor (var key in url) {\n    if (url.hasOwnProperty(key)) {\n        url[key] = host + url[key];\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 108:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_css__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_base_css__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_trade_css__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_axios__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_js_api_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_velocity_animate__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_velocity_animate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_velocity_animate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_js_cartService_js__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_js_fetch_js__ = __webpack_require__(16);\n\n\n\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_3_vue__[\"default\"]({\n    el: '.container',\n    data: {\n        lists: null,\n        total: 0,\n        editingShop: null,\n        editingShopIndex: -1,\n        removePopup: false,\n        removeData: null,\n        removeMsg: ''\n        // allSelected:true,\n        // allRemoveSelected:false,\n        // selectLists:[]\n    },\n    computed: {\n        allSelected: {\n            get: function get() {\n                if (this.lists && this.lists.length) {\n                    return this.lists.every(function (shop) {\n                        return shop.checked;\n                    });\n                }\n                return false;\n            },\n            set: function set(newVal) {\n                this.lists.forEach(function (shop) {\n                    shop.checked = newVal;\n                    shop.goodsList.forEach(function (good) {\n                        good.checked = newVal;\n                    });\n                });\n            }\n        },\n        selectLists: function selectLists() {\n            if (this.lists && this.lists.length === 0) {\n                this.total = 0;\n            }\n            if (this.lists && this.lists.length) {\n                var arr = [];\n                var total = 0;\n                this.lists.forEach(function (list) {\n                    list.goodsList.forEach(function (good) {\n                        if (good.checked) {\n                            arr.push(good);\n                            total += good.price * good.number;\n                        }\n                    });\n                });\n                this.total = total;\n                return arr;\n            }\n        },\n\n        allRemoveSelected: {\n            get: function get() {\n                if (this.editingShop) {\n                    return this.editingShop.removeChecked;\n                }\n                return false;\n            },\n            set: function set(newVal) {\n                if (this.editingShop) {\n                    this.editingShop.removeChecked = newVal;\n                    this.editingShop.goodsList.forEach(function (good) {\n                        good.removeChecked = newVal;\n                    });\n                }\n            }\n        },\n        removeLists: function removeLists() {\n            if (this.editingShop) {\n                var arr = [];\n                this.editingShop.goodsList.forEach(function (good) {\n                    if (good.removeChecked) {\n                        arr.push(good);\n                    }\n                });\n                return arr;\n            }\n            return [];\n        }\n    },\n    created: function created() {\n        this.getLists();\n    },\n\n    methods: {\n        getLists: function getLists() {\n            var _this = this;\n\n            __WEBPACK_IMPORTED_MODULE_4_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_5_js_api_js__[\"a\" /* default */].cartLists).then(function (res) {\n                var list = res.data.cartList;\n                list.forEach(function (shop) {\n                    shop.checked = true;\n                    shop.removeChecked = false;\n                    shop.editing = false;\n                    shop.editingMsg = '编辑';\n                    shop.goodsList.forEach(function (good) {\n                        good.checked = true;\n                        good.removeChecked = false;\n                    });\n                });\n                _this.lists = list;\n            });\n        },\n        selectGood: function selectGood(shop, good) {\n            var attr = this.editingShop ? 'removeChecked' : 'checked';\n            good[attr] = !good[attr];\n            shop[attr] = shop.goodsList.every(function (good) {\n                return good[attr];\n            });\n        },\n        selectShop: function selectShop(shop) {\n            var attr = this.editingShop ? 'removeChecked' : 'checked';\n            shop[attr] = !shop[attr];\n            shop.goodsList.forEach(function (good) {\n                good[attr] = shop[attr];\n            });\n        },\n        selectAll: function selectAll() {\n            var attr = this.editingShop ? 'allRemoveSelected' : 'allSelected';\n            this[attr] = !this[attr];\n        },\n        edit: function edit(shop, shopIndex) {\n            shop.editing = !shop.editing;\n            shop.editingMsg = shop.editing ? '完成' : '编辑';\n            this.lists.forEach(function (item, index) {\n                if (shopIndex !== index) {\n                    item.editing = false;\n                    item.editingMsg = shop.editing ? '' : '编辑';\n                }\n            });\n            this.editingShop = shop.editing ? shop : null;\n            this.editingShopIndex = shop.editing ? shopIndex : -1;\n        },\n        start: function start(e, good) {\n            good.startX = e.changedTouches[0].clientX;\n        },\n        end: function end(e, shopIndex, good, goodIndex) {\n            var endX = e.changedTouches[0].clientX;\n            var left = \"0\";\n            if (good.startX - endX > 100) {\n                left = '-60px';\n            }\n            if (endX - good.startX > 100) {\n                left = '0px';\n            }\n            __WEBPACK_IMPORTED_MODULE_6_velocity_animate___default()(this.$refs['goods-' + shopIndex + '-' + goodIndex], {\n                left: left\n            });\n        },\n        reduce: function reduce(good) {\n            if (good.number === 1) return;\n            __WEBPACK_IMPORTED_MODULE_4_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_5_js_api_js__[\"a\" /* default */].cartReduce, {\n                id: good.id,\n                number: 1\n            }).then(function (res) {\n                good.number--;\n            });\n        },\n        add: function add(good) {\n            __WEBPACK_IMPORTED_MODULE_4_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_5_js_api_js__[\"a\" /* default */].cartAdd, {\n                id: good.id,\n                number: 1\n            }).then(function (res) {\n                good.number++;\n            });\n        },\n        remove: function remove(shop, shopIndex, good, goodIndex) {\n            this.removePopup = true;\n            this.removeData = { shop: shop, shopIndex: shopIndex, good: good, goodIndex: goodIndex };\n            this.removeMsg = \"确定要删除该商品吗？\";\n        },\n        removeList: function removeList() {\n            this.removePopup = true;\n            this.removeMsg = '\\u786E\\u5B9A\\u5C06\\u6240\\u9009 ' + this.removeLists.length + ' \\u4E2A\\u5546\\u54C1\\u5220\\u9664?';\n        },\n        removeConfirm: function removeConfirm() {\n            var _this2 = this;\n\n            if (this.removeMsg === '确定要删除该商品吗？') {\n                var _removeData = this.removeData,\n                    shop = _removeData.shop,\n                    shopIndex = _removeData.shopIndex,\n                    good = _removeData.good,\n                    goodIndex = _removeData.goodIndex;\n\n                __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_8_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_5_js_api_js__[\"a\" /* default */].cartRemove, {\n                    id: good.id\n                }).then(function (res) {\n                    shop.goodsList.splice(goodIndex, 1);\n                    console.log(shop.goodsList.length);\n                    if (!shop.goodsList.length) {\n                        _this2.lists.splice(shopIndex, 1);\n                        _this2.removeShop();\n                    }\n                    _this2.removePopup = false;\n                });\n            } else {\n                var ids = [];\n                this.removeLists.forEach(function (good) {\n                    ids.push(good.id);\n                });\n                __WEBPACK_IMPORTED_MODULE_4_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_5_js_api_js__[\"a\" /* default */].cartMremove, {\n                    ids: ids\n                }).then(function (res) {\n                    var arr = [];\n                    _this2.editingShop.goodsList.forEach(function (good) {\n                        var index = _this2.removeLists.findIndex(function (item) {\n                            return item.id === good.id;\n                        });\n                        if (index === -1) {\n                            arr.push(good);\n                        }\n                    });\n                    if (arr.length) {\n                        _this2.editingShop.goodsList = arr;\n                    } else {\n                        _this2.lists.splice(_this2.editingShopIndex, 1);\n                        _this2.removeShop();\n                    }\n                    _this2.removePopup = false;\n                });\n            }\n        },\n        removeShop: function removeShop() {\n            this.editingShop = null;\n            this.editingShopIndex = -1;\n            this.lists.forEach(function (shop) {\n                shop.editing = false;\n                shop.editingMsg = \"编辑\";\n            });\n        }\n    },\n    filters: {\n        number: function number(price) {\n            return price.toFixed(2);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n\n\n\nfunction fetch(url, data) {\n    return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(url, data).then(function (res) {\n            var status = res.data.status;\n            if (status === 200) {\n                resolve(res);\n            } else {\n                resolve(res);\n            }\n        }).catch(function (error) {\n            reject(error);\n        });\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (fetch);\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_fetch_js__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_api_js__ = __webpack_require__(0);\n\n\n\n\n\nvar Cart = function () {\n    function Cart() {\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Cart);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Cart, null, [{\n        key: 'add',\n        value: function add(id) {\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartAdd, {\n                id: id,\n                number: 1\n            });\n        }\n    }, {\n        key: 'reduce',\n        value: function reduce(id) {\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartReduce, {\n                id: id,\n                number: 1\n            });\n        }\n    }, {\n        key: 'remove',\n        value: function remove(arr) {\n            var ids = [];\n            arr.forEach(function (good) {\n                ids.push(good.id);\n            });\n        }\n    }]);\n\n    return Cart;\n}();\n\n/* unused harmony default export */ var _unused_webpack_default_export = (Cart);\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[108]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.d53eb1f05d805b830661.js","let url ={\n    hotLists:'/index/hotLists',\n    banner:'/index/banner',\n    topList:'/category/topList',\n    subList:'/category/subList',\n    rank:'/category/rank',\n    searchList:'/search/list',\n    details:'/goods/details',\n    deal:'/goods/deal',\n    cartAdd:'/cart/add',\n    cartRemove:'/cart/remove',\n    cartMremove:'/cart/mremove',\n    cartReduce:'/cart/reduce',\n    cartLists:'/cart/list',\n    cartUpdate:'cart/update',\n    addressLists: '/address/list',\n    addressAdd: '/address/add',\n    addressRemove: '/address/remove',\n    addressUpdate: '/address/update',\n    addressSetDefault: '/address/setDefault'\n}\n\n\nlet host = 'http://rapapi.org/mockjsdata/24170'\n\nfor(let key in url){\n    if(url.hasOwnProperty(key)){\n        url[key] = host + url[key]\n    }\n}\n\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import './cart.css'\nimport './cart_base.css'\nimport './cart_trade.css'\n\nimport Vue from 'vue'\nimport axios from 'axios'\nimport url from 'js/api.js'\nimport Volecity from 'velocity-animate'\nimport Cart from 'js/cartService.js'\nimport fetch from 'js/fetch.js'\n\n\nnew Vue({\n    el:'.container',\n    data:{\n        lists:null,\n        total:0,\n        editingShop:null,\n        editingShopIndex: -1,\n        removePopup:false,\n        removeData:null,\n        removeMsg:'',\n        // allSelected:true,\n        // allRemoveSelected:false,\n        // selectLists:[]\n    },\n    computed:{\n        allSelected:{\n            get(){\n                if(this.lists && this.lists.length){\n                    return this.lists.every(shop=>{\n                        return shop.checked\n                    })\n                }\n                return false\n            },\n            set(newVal){\n                this.lists.forEach(shop=>{\n                    shop.checked = newVal\n                    shop.goodsList.forEach(good=>{\n                        good.checked = newVal\n                    })\n                })\n            }\n        },\n        selectLists(){\n            if(this.lists && this.lists.length === 0){\n                this.total = 0\n            }\n            if(this.lists && this.lists.length){\n                let arr =[]\n                let total = 0\n                this.lists.forEach(list=>{\n                    list.goodsList.forEach(good=>{\n                        if(good.checked){\n                            arr.push(good)\n                            total += good.price * good.number\n                        }\n                    })      \n                })\n                this.total = total\n                return arr\n            }\n        },\n        allRemoveSelected:{\n            get(){\n                if(this.editingShop){\n                    return this.editingShop.removeChecked\n                }\n                return false\n            },\n            set(newVal){\n                if(this.editingShop){\n                    this.editingShop.removeChecked = newVal\n                    this.editingShop.goodsList.forEach(good=>{\n                        good.removeChecked = newVal\n                    })\n                }\n            }\n        },\n        removeLists(){\n            if(this.editingShop){\n                let arr =[]\n                this.editingShop.goodsList.forEach(good=>{\n                    if(good.removeChecked){\n                        arr.push(good)\n                    }\n                })\n                return arr\n            }\n            return []\n        }\n        \n    },\n    created(){\n        this.getLists()\n    },\n    methods:{\n        getLists(){\n            axios.post(url.cartLists).then(res=>{\n                let list = res.data.cartList\n                list.forEach(shop =>{\n                    shop.checked = true\n                    shop.removeChecked = false\n                    shop.editing = false\n                    shop.editingMsg = '编辑'\n                    shop.goodsList.forEach(good =>{\n                        good.checked = true\n                        good.removeChecked = false\n                    })\n                })\n                this.lists = list\n            })\n        },\n        selectGood(shop,good){\n            let attr = this.editingShop ? 'removeChecked' : 'checked'\n            good[attr] = !good[attr]\n            shop[attr] = shop.goodsList.every(good=>{\n                return good[attr]\n            })\n        },\n        selectShop(shop){\n            let attr = this.editingShop ? 'removeChecked' : 'checked'\n            shop[attr] = !shop[attr]\n            shop.goodsList.forEach(good=>{\n                good[attr] = shop[attr]\n            })\n        },   \n        selectAll(){\n            let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\n            this[attr] = !this[attr]\n        },\n        edit(shop,shopIndex){\n            shop.editing = !shop.editing\n            shop.editingMsg = shop.editing ? '完成' : '编辑'\n            this.lists.forEach((item,index)=>{\n                if(shopIndex !== index){\n                    item.editing = false\n                    item.editingMsg = shop.editing ? '' : '编辑'\n                }\n            })\n            this.editingShop = shop.editing ? shop : null\n            this.editingShopIndex = shop.editing ? shopIndex : -1\n        },\n        start(e,good){\n            good.startX = e.changedTouches[0].clientX\n        },\n        end(e,shopIndex,good,goodIndex){\n            let endX = e.changedTouches[0].clientX\n            let left = \"0\"\n            if(good.startX - endX > 100){\n                left = '-60px'\n            }\n            if(endX - good.startX > 100){\n                left = '0px'\n            }\n            Volecity(this.$refs[`goods-${shopIndex}-${goodIndex}`],{\n                left\n            })\n        },\n        reduce(good){\n            if(good.number === 1)return\n            axios.post(url.cartReduce,{\n                id:good.id,\n                number:1\n            }).then(res=>{\n                good.number--\n            })\n            \n        },\n        add(good){\n            axios.post(url.cartAdd, {\n                id: good.id,\n                number: 1\n            }).then(res => {\n                good.number++\n            })\n        },\n        remove(shop,shopIndex,good,goodIndex){\n            this.removePopup = true\n            this.removeData = {shop,shopIndex,good,goodIndex}\n            this.removeMsg =\"确定要删除该商品吗？\"\n        },\n        removeList(){\n            this.removePopup = true\n            this.removeMsg = `确定将所选 ${this.removeLists.length} 个商品删除?`\n        },\n        removeConfirm(){\n            if(this.removeMsg === '确定要删除该商品吗？'){\n                let {shop,shopIndex,good,goodIndex} = this.removeData\n                fetch(url.cartRemove,{\n                    id:good.id\n                }).then(res=>{\n                    shop.goodsList.splice(goodIndex,1)\n                    console.log(shop.goodsList.length)\n                    if(!shop.goodsList.length){\n                        this.lists.splice(shopIndex,1)\n                        this.removeShop()\n                    }\n                    this.removePopup = false\n                })\n            }else{\n                let ids =[]\n                this.removeLists.forEach(good=>{\n                    ids.push(good.id)\n                })\n                axios.post(url.cartMremove,{\n                    ids\n                }).then(res=>{\n                    let arr =[]\n                    this.editingShop.goodsList.forEach(good=>{\n                        let index = this.removeLists.findIndex(item=>{\n                            return item.id === good.id\n                        })\n                        if(index === -1){\n                            arr.push(good)\n                        }\n                    })\n                    if(arr.length){\n                        this.editingShop.goodsList = arr\n                    }else{\n                        this.lists.splice(this.editingShopIndex,1)\n                        this.removeShop()\n                    }\n                    this.removePopup = false\n                })\n            \n            }\n        },\n        removeShop(){\n            this.editingShop = null\n            this.editingShopIndex = -1\n            this.lists.forEach(shop =>{\n                shop.editing = false\n                shop.editingMsg = \"编辑\"\n            })\n        }\n    },\n    filters:{\n        number(price){\n            return price.toFixed(2)\n        }\n    }\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\n\nfunction fetch(url,data){\n    return new Promise((resolve,reject) =>{\n        axios.post(url,data).then(res =>{\n            let status = res.data.status\n            if(status === 200){\n                resolve(res)\n            }else{\n                resolve(res)\n            }\n        }).catch(error =>{\n            reject(error)\n        })\n    })\n}\n\nexport default fetch\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js","import fetch from 'js/fetch.js'\nimport url from 'js/api.js'\n\nclass Cart {\n    static add(id){\n        return fetch(url.cartAdd,{\n            id,\n            number:1\n        })\n    }\n    static reduce(id){\n        return fetch(url.cartReduce,{\n            id,\n            number:1\n        })\n    }\n    static remove(arr){\n        let ids =[]\n        arr.forEach(good=>{\n            ids.push(good.id)\n        })\n    }\n}\n\nexport default Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js"],"sourceRoot":""}